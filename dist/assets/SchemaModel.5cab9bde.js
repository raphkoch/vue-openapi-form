import{b as h,d as l,a as d,_ as c,r as p,o,h as t,g as s,e as r,i,j as m,k as u}from"./index.65ec2d1b.js";const f=l({name:"SchemaModel",components:{MonacoEditor:d(()=>c(()=>import("./MonacoEditor.1124936a.js").then(function(e){return e.M}),["assets/MonacoEditor.1124936a.js","assets/MonacoEditor.feb26aa2.css","assets/index.65ec2d1b.js","assets/index.d6734c14.css"]).then(e=>e.default))},props:{schemaModel:{type:Object,default:()=>({})}},emits:["submit"],data(){return{schema:"",model:"",schemaError:!1,modelError:!1}},computed:{editorTheme(){return document.documentElement.classList.contains("is-dark-theme")?"vs-dark":"vs"}},watch:{schemaModel:{deep:!0,immediate:!0,handler(){this.initSchemaModel()}},schema(){this.schemaError=!1},model(){this.modelError=!1}},created(){this.initSchemaModel()},methods:{initSchemaModel(){this.schema=JSON.stringify(this.schemaModel.schema,null,2),this.model=JSON.stringify(this.schemaModel.model,null,2)},updateForm(){const e={...this.schemaModel};try{e.schema=JSON.parse(this.schema),this.schemaError=!1}catch{e.schema=this.schemaModel.schema,this.schemaError=!0}try{e.model=JSON.parse(this.model),this.modelError=!1}catch{e.model=this.schemaModel.model,this.modelError=!0}!this.schemaError&&!this.modelError&&this.$emit("submit",e)},onSchemaChange(e){typeof e=="string"&&(this.schema=e)},onModelChange(e){typeof e=="string"&&(this.model=e)}}}),_={class:"schema-model-wrapper mt-30"},g={class:"schema-input mb-30"},v=s("h5",{class:"mb-15"},"Schema",-1),M={key:0,class:"is-warning mt-10"},E=s("span",{class:"warning"},[s("i",{class:"fa fa-warning"})],-1),b={class:"model-input"},y=s("h5",{class:"mb-15"},"Model",-1),C={key:0,class:"is-warning mt-10"},w=s("span",{class:"warning"},[s("i",{class:"fa fa-warning"})],-1),S={class:"buttons mt-20"};function O(e,a,k,N,T,$){const n=p("monaco-editor");return o(),t("div",_,[s("div",g,[v,r(n,{value:e.schema,language:"json",class:"editor-writable vh-50 is-clipped",options:{minimap:{enabled:!1},theme:e.editorTheme,readOnly:!1},onChange:e.onSchemaChange},null,8,["value","options","onChange"]),e.schemaError?(o(),t("p",M,[E,i(" The format is not correct ")])):m("",!0)]),s("div",b,[y,r(n,{value:e.model,language:"json",class:"editor-writable vh-50 is-clipped",options:{minimap:{enabled:!1},theme:e.editorTheme,readOnly:!1},onChange:e.onModelChange},null,8,["value","options","onChange"]),e.modelError?(o(),t("p",C,[w,i(" The format is not correct ")])):m("",!0)]),s("div",S,[s("button",{class:"button ac-button is-primary",onClick:a[0]||(a[0]=u(V=>e.updateForm(),["prevent"]))}," Update ")])])}var J=h(f,[["render",O]]);export{J as default};
