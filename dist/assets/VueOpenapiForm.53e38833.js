import{d as c,a as l,_ as n,b as E,r as u,o as D,c as S,w as a,e as d,f as g,g as P,n as $}from"./index.65ec2d1b.js";const A=function(e){return e=e.charAt(0).toUpperCase()+e.slice(1),e.replace(/([a-z0-9])([A-Z])/g,"$1 $2")},p=function(e,r){let t=Object.assign({},{title:r},{...e});if(e.type==="object"){let i={};try{e.properties?(Object.keys(e.properties).forEach(o=>{const s=A(o);i=Object.assign({},{...i},{[`${o}`]:{...p(e.properties[o],s)}})}),t=Object.assign({},{...t},{properties:{...i}})):e.additionalProperties&&(t=Object.assign({},{...t},{type:"key-value-pairs"}),t.additionalProperties=Object.assign({},{...e.additionalProperties},{...p(e.additionalProperties,"Value")}))}catch{}}else if(e.type==="array"){let i={};const o="";i=Object.assign({},{...i},{...p(e.items,o)}),t=Object.assign({},{...t},{items:{...i}})}else{let i="";e.type==="number"||e.type==="integer"?i="number":e.type==="boolean"?i="checkbox":i="text",t=Object.assign({},{...t},{ui:{tag:"input",type:i}})}return t};function I(e,r){return p(e,r)}var T=c({components:{VForm:l(()=>n(()=>import("./index.65ec2d1b.js").then(function(e){return e.E}),["assets/index.65ec2d1b.js","assets/index.d6734c14.css"]).then(({Form:e})=>e)),VField:l(()=>n(()=>import("./index.65ec2d1b.js").then(function(e){return e.E}),["assets/index.65ec2d1b.js","assets/index.d6734c14.css"]).then(({Field:e})=>e)),ComponentErrors:l(()=>n(()=>import("./ComponentErrors.4edfa20d.js"),["assets/ComponentErrors.4edfa20d.js","assets/index.65ec2d1b.js","assets/index.d6734c14.css"]).then(e=>e.default)),RightWrongSigns:l(()=>n(()=>import("./RightWrongSigns.dcbed0ef.js"),["assets/RightWrongSigns.dcbed0ef.js","assets/index.65ec2d1b.js","assets/index.d6734c14.css"]).then(e=>e.default))},props:{isSelfRequired:{type:Boolean,default:!1}},methods:{ruleString(e){let r="";return e&&(r+="required"),r},ruleArray(e){let r={};return e&&(r.required=!0),r},ruleObject(e){let r={};return e&&(r.requiredOb=!0),r},calcFormErrors(e,r){return Object.keys(e).filter(t=>t.startsWith(r)).map(t=>{const i=t.replace(/^(\$\/)/,""),o=r.replace(/^(\$\/)/,""),s=i.replace(o+"/","");return`${s.includes("/")?`${s}: `:""}${e[t]}`})}}});const R=c({components:{ObjectFormWrapper:l(()=>n(()=>import("./ObjectFormWrapper.9d37f03f.js"),["assets/ObjectFormWrapper.9d37f03f.js","assets/fold.0deda06a.js","assets/index.65ec2d1b.js","assets/index.d6734c14.css","assets/tabs.db090a3c.js"]).then(e=>e.default)),ObjectForm:l(()=>n(()=>import("./ObjectForm.dc1d08e3.js"),["assets/ObjectForm.dc1d08e3.js","assets/fold.0deda06a.js","assets/index.65ec2d1b.js","assets/index.d6734c14.css"]).then(e=>e.default)),ArrayInput:l(()=>n(()=>import("./ArrayInput.21dce864.js"),["assets/ArrayInput.21dce864.js","assets/index.65ec2d1b.js","assets/index.d6734c14.css","assets/tabs.db090a3c.js","assets/size.63b193e8.js"]).then(e=>e.default)),KeyValuePairs:l(()=>n(()=>import("./KeyValuePairs.80c888a7.js"),["assets/KeyValuePairs.80c888a7.js","assets/index.65ec2d1b.js","assets/index.d6734c14.css","assets/tabs.db090a3c.js","assets/size.63b193e8.js"]).then(e=>e.default)),SimpleInput:l(()=>n(()=>import("./SimpleInput.b5bdad5e.js"),["assets/SimpleInput.b5bdad5e.js","assets/size.63b193e8.js","assets/index.65ec2d1b.js","assets/index.d6734c14.css"]).then(e=>e.default))},props:{type:{type:String,default:"string"},referenceModel:{type:null,default:()=>({})}},emits:["update:modelValue"],data(){return{modelData:null}},watch:{modelData:{immediate:!0,deep:!0,handler(e,r){r!=null&&(this.cleanObject&&this.clean(e),this.type==="number"||this.type==="integer"?e===""?this.$emit("update:modelValue",null):this.$emit("update:modelValue",+e):this.$emit("update:modelValue",e))}},modelValue:{deep:!0,handler(e,r){JSON.stringify(r)!==JSON.stringify(e)&&this.initModelData()}}},created(){this.initModelData()},methods:{initModelData(){this.modelValue?(this.type==="object"||this.type==="key-value-pairs")&&Object.keys(this.modelValue).length>0?this.modelData=JSON.parse(JSON.stringify(this.modelValue)):this.type==="array"&&this.modelValue.length>0?this.modelData=JSON.parse(JSON.stringify(this.modelValue)):this.type==="boolean"&&this.modelValue!==null?this.modelData=this.modelValue:this.type==="string"||this.type==="number"||this.type==="integer"?this.modelData=this.modelValue:this.modelData=this.initWithBlank():this.modelData=this.initWithBlank()},initWithBlank(){return this.type==="object"||this.type==="key-value-pairs"?{}:this.type==="array"?[]:this.type==="boolean"?!1:this.type==="number"||this.type==="integer"?null:""},clean(e){this.type==="object"||this.type==="key-value-pairs"?Object.keys(e).forEach(r=>{let t="";typeof e[r]!="string"?t=JSON.stringify(e[r]):t=e[r],(t===void 0||t==="null"||t===""||t==="{}"||t==="[]")&&delete e[r]}):this.type==="array"&&e.map((t,i)=>({item:t,idx:i})).filter(t=>{const i=t.item;let o="";return typeof i!="string"?o=JSON.stringify(i):o=i,o===void 0||o==="null"||o===""||o==="{}"||o==="[]"}).map(t=>t.idx).forEach(t=>e.splice(t,1))}}});const F=c({name:"VueOpenapiForm",components:{AcForm:l(()=>n(()=>import("./Form.94495843.js"),["assets/Form.94495843.js","assets/index.65ec2d1b.js","assets/index.d6734c14.css"])),FormFooterControl:l(()=>n(()=>import("./FormFooterControl.d77ddf41.js"),["assets/FormFooterControl.d77ddf41.js","assets/index.65ec2d1b.js","assets/index.d6734c14.css"]))},mixins:[R,T],provide(){const e={};return Object.defineProperty(e,"theme",{enumerable:!0,get:()=>this.themeMode}),{providedData:e}},props:{schema:{type:Object,default:()=>({})},modelValue:{type:Object,default:()=>({})},formTitle:{type:String,default:""},onlyJson:{type:Boolean,default:!1},size:{type:String,default:"small"},themeMode:{type:String,default:"light"}},computed:{extendedSchema(){return I(this.schema,this.formTitle)}}});function L(e,r,t,i,o,s){const _=u("object-form-wrapper"),v=u("v-field"),h=u("form-footer-control"),b=u("ac-form"),V=u("v-form");return D(),S(V,{ref:"v-form",as:""},{default:a(({meta:y,validate:O,errors:m})=>[d(b,null,{"form-left-controls":a(()=>[d(h,null,{default:a(()=>[g(e.$slots,"left-controls",{validate:O,formStatus:y,errors:m})]),_:2},1024)]),"form-right-controls":a(()=>[d(h,null,{default:a(()=>[g(e.$slots,"right-controls",{validate:O,formStatus:y,errors:m})]),_:2},1024)]),default:a(()=>[P("div",{class:$(["vue-openapi-form pl-20",{"is-medium":e.size==="medium"}])},[d(v,{modelValue:e.modelData,"onUpdate:modelValue":r[0]||(r[0]=f=>e.modelData=f),name:e.extendedSchema.title,label:e.extendedSchema.title,rules:e.ruleObject(!0),as:""},{default:a(({field:f,handleChange:j})=>[d(_,{"field-name":"$","model-value":f.value,"expand-form":!0,"is-root":!0,level:1,"is-self-required":!0,"only-json":e.onlyJson,schema:e.extendedSchema,"reference-model":e.referenceModel||{},errors:m,showRootTab:!0,"onUpdate:modelValue":j},null,8,["model-value","only-json","schema","reference-model","errors","onUpdate:modelValue"])]),_:2},1032,["modelValue","name","label","rules"])],2)]),_:2},1024)]),_:3},512)}var k=E(F,[["render",L]]),N=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}));export{N as V,R as m,T as v};
