import{d as p,a as o,_ as n,b as S,r as u,o as E,c as D,w as a,e as d,f as g,g as j,n as P}from"./index.bb828607.js";import $ from"./SchemaModel.30054647.js";const I=function(e){return e=e.charAt(0).toUpperCase()+e.slice(1),e.replace(/([a-z0-9])([A-Z])/g,"$1 $2")},m=function(e,i){let t=Object.assign({},{title:i},{...e});if(e.type==="object"){let r={};try{e.properties?(Object.keys(e.properties).forEach(l=>{const s=I(l);r=Object.assign({},{...r},{[`${l}`]:{...m(e.properties[l],s)}})}),t=Object.assign({},{...t},{properties:{...r}})):e.additionalProperties&&(t=Object.assign({},{...t},{type:"key-value-pairs"}),t.additionalProperties=Object.assign({},{...e.additionalProperties},{...m(e.additionalProperties,"Value")}))}catch{}}else if(e.type==="array"){let r={};const l="";r=Object.assign({},{...r},{...m(e.items,l)}),t=Object.assign({},{...t},{items:{...r}})}else{let r="";e.type==="number"||e.type==="integer"?r="number":e.type==="boolean"?r="checkbox":r="text",t=Object.assign({},{...t},{ui:{tag:"input",type:r}})}return t};function A(e,i){return m(e,i)}var F=p({components:{VForm:o(()=>n(()=>import("./index.bb828607.js").then(function(e){return e.I}),["assets/index.bb828607.js","assets/index.d6734c14.css"]).then(({Form:e})=>e)),VField:o(()=>n(()=>import("./index.bb828607.js").then(function(e){return e.I}),["assets/index.bb828607.js","assets/index.d6734c14.css"]).then(({Field:e})=>e)),ComponentErrors:o(()=>n(()=>import("./ComponentErrors.a7768681.js"),["assets/ComponentErrors.a7768681.js","assets/index.bb828607.js","assets/index.d6734c14.css"]).then(e=>e.default)),RightWrongSigns:o(()=>n(()=>import("./RightWrongSigns.5dceb48c.js"),["assets/RightWrongSigns.5dceb48c.js","assets/index.bb828607.js","assets/index.d6734c14.css"]).then(e=>e.default))},props:{isSelfRequired:{type:Boolean,default:!1}},methods:{ruleString(e){let i="";return e&&(i+="required"),i},ruleArray(e){let i={};return e&&(i.required=!0),i},ruleObject(e){let i={};return e&&(i.requiredOb=!0),i},calcFormErrors(e,i){return Object.keys(e).filter(t=>t.startsWith(i)).map(t=>{const r=t.replace(/^(\$\/)/,""),l=i.replace(/^(\$\/)/,""),s=r.replace(l+"/","");return`${s.includes("/")?`${s}: `:""}${e[t]}`})}}});const T=p({components:{ObjectFormWrapper:o(()=>n(()=>import("./ObjectFormWrapper.fbb9ca58.js"),["assets/ObjectFormWrapper.fbb9ca58.js","assets/fold.454484b6.js","assets/index.bb828607.js","assets/index.d6734c14.css","assets/tabs.9d0d1e5f.js","assets/SchemaModel.30054647.js","assets/SchemaModel.e011f121.css"]).then(e=>e.default)),ObjectForm:o(()=>n(()=>import("./ObjectForm.4e403e27.js"),["assets/ObjectForm.4e403e27.js","assets/fold.454484b6.js","assets/index.bb828607.js","assets/index.d6734c14.css","assets/SchemaModel.30054647.js","assets/SchemaModel.e011f121.css"]).then(e=>e.default)),ArrayInput:o(()=>n(()=>import("./ArrayInput.3a026b63.js"),["assets/ArrayInput.3a026b63.js","assets/index.bb828607.js","assets/index.d6734c14.css","assets/tabs.9d0d1e5f.js","assets/size.2ffef6e5.js","assets/SchemaModel.30054647.js","assets/SchemaModel.e011f121.css"]).then(e=>e.default)),KeyValuePairs:o(()=>n(()=>import("./KeyValuePairs.263fbeaa.js"),["assets/KeyValuePairs.263fbeaa.js","assets/index.bb828607.js","assets/index.d6734c14.css","assets/tabs.9d0d1e5f.js","assets/size.2ffef6e5.js","assets/SchemaModel.30054647.js","assets/SchemaModel.e011f121.css"]).then(e=>e.default)),SimpleInput:o(()=>n(()=>import("./SimpleInput.cae2a552.js"),["assets/SimpleInput.cae2a552.js","assets/size.2ffef6e5.js","assets/index.bb828607.js","assets/index.d6734c14.css","assets/SchemaModel.30054647.js","assets/SchemaModel.e011f121.css"]).then(e=>e.default))},props:{type:{type:String,default:"string"},referenceModel:{type:null,default:()=>({})}},emits:["update:modelValue"],data(){return{modelData:null}},watch:{modelData:{immediate:!0,deep:!0,handler(e,i){i!=null&&(this.cleanObject&&this.clean(e),this.type==="number"||this.type==="integer"?e===""?this.$emit("update:modelValue",null):this.$emit("update:modelValue",+e):this.$emit("update:modelValue",e))}},modelValue:{deep:!0,handler(e,i){JSON.stringify(i)!==JSON.stringify(e)&&this.initModelData()}}},created(){this.initModelData()},methods:{initModelData(){this.modelValue?(this.type==="object"||this.type==="key-value-pairs")&&Object.keys(this.modelValue).length>0?this.modelData=JSON.parse(JSON.stringify(this.modelValue)):this.type==="array"&&this.modelValue.length>0?this.modelData=JSON.parse(JSON.stringify(this.modelValue)):this.type==="boolean"&&this.modelValue!==null?this.modelData=this.modelValue:this.type==="string"||this.type==="number"||this.type==="integer"?this.modelData=this.modelValue:this.modelData=this.initWithBlank():this.modelData=this.initWithBlank()},initWithBlank(){return this.type==="object"||this.type==="key-value-pairs"?{}:this.type==="array"?[]:this.type==="boolean"?!1:this.type==="number"||this.type==="integer"?null:""},clean(e){this.type==="object"||this.type==="key-value-pairs"?Object.keys(e).forEach(i=>{let t="";typeof e[i]!="string"?t=JSON.stringify(e[i]):t=e[i],(t===void 0||t==="null"||t===""||t==="{}"||t==="[]")&&delete e[i]}):this.type==="array"&&e.map((t,r)=>({item:t,idx:r})).filter(t=>{const r=t.item;let l="";return typeof r!="string"?l=JSON.stringify(r):l=r,l===void 0||l==="null"||l===""||l==="{}"||l==="[]"}).map(t=>t.idx).forEach(t=>e.splice(t,1))}}});const R=p({name:"VueOpenapiForm",components:{AcForm:o(()=>n(()=>import("./Form.ace487f2.js"),["assets/Form.ace487f2.js","assets/index.bb828607.js","assets/index.d6734c14.css"])),FormFooterControl:o(()=>n(()=>import("./FormFooterControl.2841dbd6.js"),["assets/FormFooterControl.2841dbd6.js","assets/index.bb828607.js","assets/index.d6734c14.css"])),SchemaModel:$},mixins:[T,F],provide(){const e={};return Object.defineProperty(e,"theme",{enumerable:!0,get:()=>this.themeMode}),{providedData:e}},props:{schema:{type:Object,default:()=>({})},modelValue:{type:Object,default:()=>({})},formTitle:{type:String,default:""},onlyJson:{type:Boolean,default:!1},size:{type:String,default:"small"},themeMode:{type:String,default:"light"}},computed:{extendedSchema(){return A(this.schema,this.formTitle)}},methods:{handleFormSubmit(e){this.$emit("update:modelValue",e.model)}}});function L(e,i,t,r,l,s){const f=u("schema-model"),b=u("v-field"),c=u("form-footer-control"),v=u("ac-form"),V=u("v-form");return E(),D(V,{ref:"v-form",as:""},{default:a(({meta:h,validate:_,errors:y})=>[d(v,null,{"form-left-controls":a(()=>[d(c,null,{default:a(()=>[g(e.$slots,"left-controls",{validate:_,formStatus:h,errors:y})]),_:2},1024)]),"form-right-controls":a(()=>[d(c,null,{default:a(()=>[g(e.$slots,"right-controls",{validate:_,formStatus:h,errors:y})]),_:2},1024)]),default:a(()=>[j("div",{class:P(["vue-openapi-form pl-20",{"is-medium":e.size==="medium"}])},[d(b,{modelValue:e.modelData,"onUpdate:modelValue":i[0]||(i[0]=O=>e.modelData=O),name:e.extendedSchema.title,label:e.extendedSchema.title,rules:e.ruleObject(!0),as:""},{default:a(({field:O,handleChange:N})=>[d(f,{"schema-model":{schema:e.extendedSchema,model:e.modelValue},onSubmit:e.handleFormSubmit},null,8,["schema-model","onSubmit"])]),_:1},8,["modelValue","name","label","rules"])],2)]),_:2},1024)]),_:3},512)}var k=S(R,[["render",L]]),B=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}));export{B as V,T as m,F as v};
