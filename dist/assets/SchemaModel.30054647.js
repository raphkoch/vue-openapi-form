import{b as v,d as g,a as b,_ as y,r as M,o as t,h as o,g as s,e as h,i as c,j as d,F as p,k as u,l as S,t as _,m as f,v as E,p as w,q as k,s as C}from"./index.bb828607.js";const O=g({name:"SchemaModel",components:{MonacoEditor:b(()=>y(()=>import("./MonacoEditor.51c2ab25.js").then(function(e){return e.M}),["assets/MonacoEditor.51c2ab25.js","assets/MonacoEditor.feb26aa2.css","assets/index.bb828607.js","assets/index.d6734c14.css"]).then(e=>e.default))},props:{schemaModel:{type:Object,default:()=>({})}},emits:["submit"],data(){return{schema:"",model:"",formData:{},schemaError:!1,modelError:!1}},computed:{editorTheme(){return document.documentElement.classList.contains("is-dark-theme")?"vs-dark":"vs"},parsedSchema(){try{return JSON.parse(this.schema)}catch{return null}},parsedModel(){try{return JSON.parse(this.model)}catch{return null}}},watch:{schemaModel:{deep:!0,immediate:!0,handler(){this.initSchemaModel()}},schema(){this.schemaError=!1},model(){this.modelError=!1}},created(){this.initSchemaModel()},methods:{initSchemaModel(){this.schema=JSON.stringify(this.schemaModel.schema,null,2),this.model=JSON.stringify(this.schemaModel.model,null,2),this.formData={...this.schemaModel.model}},updateForm(){const e={...this.schemaModel};try{e.schema=JSON.parse(this.schema),this.schemaError=!1}catch{e.schema=this.schemaModel.schema,this.schemaError=!0}try{e.model=JSON.parse(this.model),this.modelError=!1}catch{e.model=this.schemaModel.model,this.modelError=!0}!this.schemaError&&!this.modelError&&this.$emit("submit",e)},onSchemaChange(e){typeof e=="string"&&(this.schema=e)},onModelChange(e){typeof e=="string"&&(this.model=e)}}}),i=e=>(k("data-v-6bb496b0"),e=e(),C(),e),N={class:"schema-model-wrapper mt-30"},D={class:"schema-input mb-30"},V=i(()=>s("h5",{class:"mb-15"},"Schema",-1)),T={key:0,class:"is-warning mt-10"},J=i(()=>s("span",{class:"warning"},[s("i",{class:"fa fa-warning"})],-1)),$={class:"model-input"},F=i(()=>s("h5",{class:"mb-15"},"Model",-1)),I={key:0,class:"is-warning mt-10"},U=i(()=>s("span",{class:"warning"},[s("i",{class:"fa fa-warning"})],-1)),j={key:0,class:"form-fields mt-30"},B=i(()=>s("h5",{class:"mb-15"},"Form",-1)),L=["for"],A={key:0},P=["onUpdate:modelValue"],q=["value"],R={key:1},z=["onUpdate:modelValue","id"],G={class:"buttons mt-20"};function H(e,l,K,Q,W,X){const m=M("monaco-editor");return t(),o("div",N,[s("div",D,[V,h(m,{value:e.schema,language:"json",class:"editor-writable vh-50 is-clipped",options:{minimap:{enabled:!1},theme:e.editorTheme,readOnly:!1},onChange:e.onSchemaChange},null,8,["value","options","onChange"]),e.schemaError?(t(),o("p",T,[J,c(" The format is not correct ")])):d("",!0)]),s("div",$,[F,h(m,{value:e.model,language:"json",class:"editor-writable vh-50 is-clipped",options:{minimap:{enabled:!1},theme:e.editorTheme,readOnly:!1},onChange:e.onModelChange},null,8,["value","options","onChange"]),e.modelError?(t(),o("p",I,[U,c(" The format is not correct ")])):d("",!0)]),e.parsedSchema?(t(),o("div",j,[B,(t(!0),o(p,null,u(e.parsedSchema.properties,(n,a)=>(t(),o("div",{key:a,class:"form-field"},[s("label",{for:a},_(a),9,L),n.enum?(t(),o("div",A,[f(s("select",{"onUpdate:modelValue":r=>e.formData[a]=r},[(t(!0),o(p,null,u(n.enum,r=>(t(),o("option",{key:r,value:r},_(r),9,q))),128))],8,P),[[E,e.formData[a]]])])):(t(),o("div",R,[f(s("input",{type:"text","onUpdate:modelValue":r=>e.formData[a]=r,id:a},null,8,z),[[w,e.formData[a]]])]))]))),128))])):d("",!0),s("div",G,[s("button",{class:"button ac-button is-primary",onClick:l[0]||(l[0]=S(n=>e.updateForm(),["prevent"]))}," Update ")])])}var Z=v(O,[["render",H],["__scopeId","data-v-6bb496b0"]]);export{Z as default};
