import{b as O,d as S,a as A,_ as B,r as n,m as L,o,h as u,g as a,i as M,t as P,e as m,F as T,q as J,c as d,w as p,j as q,n as v,p as w,k as f}from"./index.65ec2d1b.js";import{m as E,v as F}from"./VueOpenapiForm.53e38833.js";import{t as z}from"./tabs.db090a3c.js";import{s as H}from"./size.63b193e8.js";const R=S({name:"ArrayInput",components:{ArrayInputItems:A(()=>B(()=>import("./ArrayInputItems.6e9bab2e.js"),["assets/ArrayInputItems.6e9bab2e.js","assets/VueOpenapiForm.53e38833.js","assets/VueOpenapiForm.15c6fa25.css","assets/index.65ec2d1b.js","assets/index.d6734c14.css"]).then(e=>e.default))},mixins:[E,z,F,H],props:{schema:{type:Object,default:()=>({})},fieldName:{type:String,default:""},modelValue:{type:null,default:()=>[]},errors:{type:Object,default:()=>({})},isLastChild:{type:Boolean,default:!1}},data(){return{newData:null,updatePass:0}},computed:{items(){return this.schema.items||{}}},methods:{swapElems(e,s){const h=JSON.parse(JSON.stringify(this.modelData[e]));this.modelData[e]=JSON.parse(JSON.stringify(this.modelData[s])),this.modelData[s]=h,this.updatePass+=1},async addNewValue(e){const{valid:s}=await e();s&&(this.modelData.push(this.newData),this.newData=null,this.updatePass+=1)},deleteValue(e){this.modelData.splice(e,1),this.updatePass+=1}}}),G={class:"nested-header mb-5"},K={class:"is-flex is-semi-normal"},Q=a("div",{class:"collaps-icon is-disabled"},[a("i",{class:"fa fa-minus"})],-1),W={key:0,class:"is-flex gap-16 is-flex-direction-column"},X={class:"form-right-item"},Y={class:"buttons",style:{gap:"16px"}},Z=["disabled","onClick"],x=a("span",{class:"icon is-small"},[a("i",{class:"fa fa-angle-up"})],-1),ee=[x],ae=["disabled","onClick"],se=a("span",{class:"icon is-small"},[a("i",{class:"fa fa-angle-down"})],-1),te=[se],le=["onClick"],oe=a("span",{class:"icon"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})])],-1),ne=[oe],re={class:"value-list-save"},ie=["onClick"],me=a("div",{class:"icon"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])],-1),de=[me];function ue(e,s,h,pe,ce,ve){const b=n("component-errors"),V=n("tabs"),k=n("array-input-items"),D=n("object-form-wrapper"),c=n("v-field"),g=n("key-value-pairs"),C=n("array-input",!0),_=n("simple-input"),$=n("v-form"),N=n("yaml-form"),U=n("json-form"),y=L("tooltip");return o(),u("div",{as:"div",class:v(["ac-nested-elements vue-schema-form-array array-input",{"stop-line":e.isLastChild}])},[a("div",G,[a("h6",K,[Q,M(" "+P(e.schema.title||"Array Item Description")+" ",1),m(b,{errors:e.calcFormErrors(e.errors,e.fieldName)},null,8,["errors"])]),m(V,{modelValue:e.activeTab,"onUpdate:modelValue":s[0]||(s[0]=r=>e.activeTab=r)},null,8,["modelValue"])]),e.activeTab==="form"?(o(),u("div",W,[(o(!0),u(T,null,J(e.modelData,(r,l)=>(o(),u("div",{key:`${l}-${e.schema.title}-form`,class:"nested-body"},[m(k,{"field-name":e.fieldName,items:e.items,schema:e.schema,index:l,"model-value":JSON.parse(JSON.stringify(e.modelData)),errors:e.errors,"reference-model":e.referenceModel||[]},null,8,["field-name","items","schema","index","model-value","errors","reference-model"]),a("div",X,[a("div",Y,[a("div",{class:v(["buttons up-down-buttons",{"is-small":!e.isMedium}])},[w((o(),u("button",{class:v(["up-down-button",{"is-primary":l!==0}]),disabled:l===0,onClick:f(t=>e.swapElems(l-1,l),["prevent"])},ee,10,Z)),[[y,{content:"move up",placement:"top",classes:["is-primary"],targetClasses:["up-down-button"]}]]),w((o(),u("button",{class:v(["up-down-button",{"is-primary":l!==e.modelData.length-1}]),disabled:l===e.modelData.length-1,onClick:f(t=>e.swapElems(l,l+1),["prevent"])},te,10,ae)),[[y,{content:"move down",placement:"bottom",classes:["is-primary"],targetClasses:["up-down-button"]}]])],2),a("button",{class:"button ac-button is-medium is-square is-danger is-outlined mb-0",onClick:f(t=>e.deleteValue(l),["prevent"])},ne,8,le)])])]))),128)),(o(),d($,{key:e.updatePass,as:""},{default:p(({validate:r,errors:l})=>[a("div",re,[e.items.type==="object"?(o(),d(c,{key:0,modelValue:e.newData,"onUpdate:modelValue":s[1]||(s[1]=t=>e.newData=t),rules:e.ruleObject(!0),name:"newItem",label:`${e.schema.title} new value`,as:""},{default:p(({field:t,handleChange:i})=>[m(D,{"field-name":"newItem","model-value":t.value,"is-last-child":!0,"expand-form":!0,"is-self-required":!0,schema:{...e.items,title:`${e.schema.title} new value`},type:e.items.type,errors:l,"reference-model":{},"onUpdate:modelValue":i},null,8,["model-value","schema","type","errors","onUpdate:modelValue"])]),_:2},1032,["modelValue","rules","label"])):e.items.type==="key-value-pairs"?(o(),d(c,{key:1,modelValue:e.newData,"onUpdate:modelValue":s[2]||(s[2]=t=>e.newData=t),rules:e.ruleObject(!0),name:"newItem",label:`${e.schema.title} new value`,as:""},{default:p(({field:t,handleChange:i})=>[m(g,{"field-name":"newItem","model-value":t.value,"is-last-child":!0,schema:{...e.items,title:`${e.schema.title} new value`},errors:l,type:e.items.type,"reference-model":{},"onUpdate:modelValue":i},null,8,["model-value","schema","errors","type","onUpdate:modelValue"])]),_:2},1032,["modelValue","rules","label"])):e.items.type==="array"?(o(),d(c,{key:2,modelValue:e.newData,"onUpdate:modelValue":s[3]||(s[3]=t=>e.newData=t),rules:e.ruleArray(!0),name:"newItem",label:`${e.schema.title} new value`,as:""},{default:p(({field:t,handleChange:i})=>[m(C,{"field-name":"newItem","model-value":t.value,"is-last-child":!0,schema:{...e.items,title:`${e.schema.title} new value`},errors:l,type:e.items.type,"reference-model":[],"onUpdate:modelValue":i},null,8,["model-value","schema","errors","type","onUpdate:modelValue"])]),_:2},1032,["modelValue","rules","label"])):(o(),d(c,{key:3,modelValue:e.newData,"onUpdate:modelValue":s[4]||(s[4]=t=>e.newData=t),rules:e.ruleString(!0),name:"newItem",label:`${e.schema.title} new value`,as:""},{default:p(({field:t,handleChange:i,errors:j,meta:I})=>[m(_,{"model-value":t.value,schema:{...e.items,title:`${e.schema.title} new value`},required:!0,type:e.items.type,"validation-ob":{errors:j,...I},"reference-model":"","onUpdate:modelValue":i},null,8,["model-value","schema","type","validation-ob","onUpdate:modelValue"])]),_:1},8,["modelValue","rules","label"])),a("button",{class:"button ac-button is-medium is-square is-primary is-outlined",onClick:f(t=>e.addNewValue(r),["prevent"])},de,8,ie)])]),_:1}))])):e.activeTab==="yaml"?(o(),d(N,{key:1,modelValue:e.modelData,"onUpdate:modelValue":s[5]||(s[5]=r=>e.modelData=r),"reference-model":e.referenceModel||[]},null,8,["modelValue","reference-model"])):e.activeTab==="json"?(o(),d(U,{key:2,modelValue:e.modelData,"onUpdate:modelValue":s[6]||(s[6]=r=>e.modelData=r),"reference-model":e.referenceModel||[]},null,8,["modelValue","reference-model"])):q("",!0)],2)}var be=O(R,[["render",ue]]);export{be as default};
